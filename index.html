<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Risk Management Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --black: #000000;
            --bg-dark: #050509;
            --bg-darker: #020203;
            --surface: #0B0F19;
            --border: #1F2933;
            --white: #FFFFFF;
            --text-primary: #F9FAFB;
            --text-secondary: #9CA3AF;
            --text-muted: #6B7280;
            --red: #DC2626;
            --red-hover: #B91C1C;
            --red-light: rgba(220, 38, 38, 0.1);
            --yellow: #EAB308;
            --yellow-light: rgba(234, 179, 8, 0.1);
            --green: #22C55E;
            --green-light: rgba(34, 197, 94, 0.1);
            --blue: #3B82F6;
            --blue-light: rgba(59, 130, 246, 0.1);
            --purple: #A855F7;
            --purple-light: rgba(168, 85, 247, 0.1);
            --gray-hover: #16191F;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.5);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.6);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.8);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, #111827 45%, var(--bg-darker) 100%);
            color: var(--text-primary);
            line-height: 1.5;
            min-height: 100vh;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 64px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            padding: 0 24px;
            z-index: 100;
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .menu-toggle {
            width: 40px;
            height: 40px;
            border: none;
            background: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: background 0.2s;
            color: var(--text-primary);
        }

        .menu-toggle:hover {
            background: var(--gray-hover);
        }

        .logo {
            font-size: 20px;
            font-weight: 700;
            color: var(--white);
            letter-spacing: 1px;
        }

        .header-center {
            flex: 1;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 100%;
            height: 40px;
            padding: 0 40px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            transition: all 0.2s;
            background: var(--bg-dark);
            color: var(--text-primary);
        }

        .search-input:focus {
            border-color: var(--red);
            box-shadow: 0 0 0 3px var(--red-light);
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        .icon {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: background 0.2s;
            position: relative;
            color: var(--text-primary);
        }

        .header-btn:hover {
            background: var(--gray-hover);
        }

        .alert-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            background: var(--red);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .notifications-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            width: 380px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            display: none;
        }

        .notifications-dropdown.active {
            display: block;
        }

        .notifications-header {
            padding: 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notifications-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .notifications-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-item {
            padding: 16px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s;
        }

        .notification-item:hover {
            background: var(--gray-hover);
        }

        .notification-item.critical {
            border-left: 3px solid var(--red);
        }

        .notification-module {
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .notification-text {
            font-size: 14px;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .notification-time {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 64px;
            width: 260px;
            height: calc(100vh - 64px);
            background: var(--surface);
            border-right: 1px solid var(--border);
            padding: 24px 0;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 90;
        }

        .sidebar.collapsed {
            transform: translateX(-260px);
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-title {
            padding: 0 24px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-muted);
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 24px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
            border-left: 3px solid transparent;
            position: relative;
        }

        .nav-item:hover {
            background: linear-gradient(90deg, rgba(220, 38, 38, 0.06), transparent);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: linear-gradient(90deg, rgba(220, 38, 38, 0.1), transparent);
            color: var(--red);
            border-left-color: var(--red);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Main Content */
        .main-content {
            margin-left: 260px;
            margin-top: 64px;
            flex: 1;
            padding: 32px;
            transition: margin-left 0.3s ease;
            min-height: calc(100vh - 64px);
        }

        .main-content.expanded {
            margin-left: 0;
        }

        /* Module Container */
        .module-container {
            opacity: 0;
            transform: scale(0.95);
            animation: coreExpansion 450ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes coreExpansion {
            0% {
                opacity: 0;
                transform: scale(0.95) translateY(10px);
            }
            40% {
                opacity: 0.5;
                transform: scale(0.98) translateY(5px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .module-header {
            margin-bottom: 32px;
        }

        .module-title {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .module-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* KPI Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .kpi-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
            cursor: pointer;
            opacity: 0;
            animation: cardStagger 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .kpi-card:nth-child(1) { animation-delay: 0.1s; }
        .kpi-card:nth-child(2) { animation-delay: 0.15s; }
        .kpi-card:nth-child(3) { animation-delay: 0.2s; }
        .kpi-card:nth-child(4) { animation-delay: 0.25s; }

        @keyframes cardStagger {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .kpi-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-4px);
            border-color: var(--red);
        }

        .kpi-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .kpi-label {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .kpi-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }

        .kpi-icon.critical { background: var(--red-light); color: var(--red); }
        .kpi-icon.warning { background: var(--yellow-light); color: var(--yellow); }
        .kpi-icon.success { background: var(--green-light); color: var(--green); }
        .kpi-icon.info { background: var(--blue-light); color: var(--blue); }

        .kpi-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .kpi-trend {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
        }

        .kpi-trend.up { color: var(--red); }
        .kpi-trend.down { color: var(--green); }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 8px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 24px;
        }

        .tab {
            padding: 12px 20px;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .tab:hover {
            color: var(--text-primary);
        }

        .tab.active {
            color: var(--red);
            border-bottom-color: var(--red);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Table */
        .table-container {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 24px;
        }

        .table-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .table-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .table-wrapper {
            overflow-x: auto;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table thead {
            background: var(--bg-dark);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .table th {
            padding: 12px 24px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--border);
        }

        .table td {
            padding: 16px 24px;
            font-size: 14px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border);
        }

        .table tbody tr {
            transition: background 0.2s;
            cursor: pointer;
        }

        .table tbody tr:hover {
            background: var(--gray-hover);
        }

        .table tbody tr:last-child td {
            border-bottom: none;
        }

        .table tbody tr.critical-row {
            border-left: 3px solid var(--red);
        }

        .table tbody tr.high-row {
            border-left: 3px solid var(--yellow);
        }

        /* Status Badge */
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-critical {
            background: var(--red-light);
            color: var(--red);
        }

        .status-high {
            background: var(--yellow-light);
            color: var(--yellow);
        }

        .status-medium {
            background: var(--blue-light);
            color: var(--blue);
        }

        .status-low {
            background: var(--green-light);
            color: var(--green);
        }

        .status-active {
            background: var(--green-light);
            color: var(--green);
        }

        .status-pending {
            background: var(--yellow-light);
            color: var(--yellow);
        }

        .status-blocked {
            background: var(--red-light);
            color: var(--red);
        }

        /* Source Badge */
        .source-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            margin-right: 4px;
        }

        .source-upp {
            background: var(--blue-light);
            color: var(--blue);
        }

        .source-buh {
            background: var(--green-light);
            color: var(--green);
        }

        .source-edo {
            background: var(--purple-light);
            color: var(--purple);
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--red);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--red-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: var(--surface);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--gray-hover);
            border-color: var(--text-muted);
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* Filters */
        .filters {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 10px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            background: var(--surface);
            color: var(--text-primary);
            cursor: pointer;
            outline: none;
            transition: all 0.2s;
        }

        .filter-select:hover {
            border-color: var(--text-muted);
        }

        .filter-select:focus {
            border-color: var(--red);
            box-shadow: 0 0 0 3px var(--red-light);
        }

        /* Chart */
        .chart-container {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }

        .chart-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .chart-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .chart-controls {
            display: flex;
            gap: 8px;
        }

        .chart-legend {
            display: flex;
            gap: 24px;
            margin-bottom: 24px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .chart-placeholder {
            height: 200px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            gap: 12px;
            padding: 0 24px;
        }

        .chart-bar {
            flex: 1;
            background: var(--red);
            border-radius: 4px 4px 0 0;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 8px;
            position: relative;
            transition: all 0.3s;
        }

        .chart-bar:hover {
            background: var(--red-hover);
        }

        .chart-bar-label {
            position: absolute;
            bottom: -24px;
            font-size: 12px;
            color: var(--text-muted);
        }

        /* Forecast Line */
        .forecast-line {
            border-top: 2px dashed var(--yellow);
            width: 100%;
            margin: 24px 0;
            position: relative;
        }

        .forecast-label {
            position: absolute;
            right: 0;
            top: -10px;
            background: var(--surface);
            padding: 2px 8px;
            font-size: 11px;
            color: var(--yellow);
            font-weight: 600;
        }

        /* Info Block */
        .info-block {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .info-block-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .info-value {
            font-size: 14px;
            color: var(--text-primary);
            font-weight: 600;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 24px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--surface);
            border-radius: 16px;
            border: 1px solid var(--border);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: none;
            cursor: pointer;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .modal-close:hover {
            background: var(--gray-hover);
        }

        .modal-body {
            padding: 24px;
        }

        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        /* Form */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 10px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            background: var(--bg-dark);
            color: var(--text-primary);
            outline: none;
            transition: all 0.2s;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            border-color: var(--red);
            box-shadow: 0 0 0 3px var(--red-light);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Alert Box */
        .alert {
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .alert-critical {
            background: var(--red-light);
            border: 1px solid var(--red);
        }

        .alert-warning {
            background: var(--yellow-light);
            border: 1px solid var(--yellow);
        }

        .alert-info {
            background: var(--blue-light);
            border: 1px solid var(--blue);
        }

        .alert-icon {
            flex-shrink: 0;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .alert-critical .alert-title { color: var(--red); }
        .alert-warning .alert-title { color: var(--yellow); }
        .alert-info .alert-title { color: var(--blue); }

        .alert-text {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Priority Badge */
        .priority-high {
            color: var(--red);
            font-weight: 600;
        }

        .priority-medium {
            color: var(--yellow);
            font-weight: 600;
        }

        .priority-low {
            color: var(--green);
            font-weight: 600;
        }

        /* Traffic Light */
        .traffic-light {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
        }

        .traffic-red {
            background: var(--red);
        }

        .traffic-yellow {
            background: var(--yellow);
        }

        .traffic-green {
            background: var(--green);
        }

        /* Progress Bar */
        .progress-bar {
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--red);
            border-radius: 4px;
            transition: width 0.3s;
        }

        .progress-fill.success {
            background: var(--green);
        }

        .progress-fill.warning {
            background: var(--yellow);
        }

        /* Hidden */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <button class="menu-toggle" onclick="toggleSidebar()">
                    <svg class="icon" viewBox="0 0 24 24">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <div class="logo">KABEX</div>
            </div>
            
            <div class="header-center">
                <div class="search-box">
                    <svg class="icon search-icon" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <input type="text" class="search-input" placeholder="Поиск...">
                </div>
            </div>
            
            <div class="header-right">
                <button class="header-btn" onclick="toggleNotifications()">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="alert-badge"></span>
                </button>
                
                <div class="notifications-dropdown" id="notificationsDropdown">
                    <div class="notifications-header">
                        <div class="notifications-title">Уведомления</div>
                    </div>
                    <div class="notifications-list">
                        <div class="notification-item critical">
                            <div class="notification-module">Финансы</div>
                            <div class="notification-text">Просрочка ПДЗ более 90 дней</div>
                            <div class="notification-time">2 часа назад</div>
                        </div>
                        <div class="notification-item critical">
                            <div class="notification-module">Бухгалтерия</div>
                            <div class="notification-text">Расхождение ЭДО ↔ Бухгалтерия</div>
                            <div class="notification-time">3 часа назад</div>
                        </div>
                <div class="notification-item">
                    <div class="notification-module">Legal Risk Control</div>
                    <div class="notification-text">Высокий юридический риск по договору ДГ-2024/578</div>
                    <div class="notification-time">1 день назад</div>
                </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <nav class="nav-section">
                <div class="nav-title">Главное</div>
                <div class="nav-item active" onclick="navigateTo('dashboard')">
                    <svg class="icon nav-icon" viewBox="0 0 24 24">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    <span>Главный дашборд</span>
                </div>
            </nav>

            <nav class="nav-section">
                <div class="nav-title">Модули</div>
                <div class="nav-item" onclick="navigateTo('finance')">
                    <svg class="icon nav-icon" viewBox="0 0 24 24">
                        <line x1="12" y1="1" x2="12" y2="23"></line>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                    </svg>
                    <span>Финансы</span>
                </div>
                <div class="nav-item" onclick="navigateTo('accounting')">
                    <svg class="icon nav-icon" viewBox="0 0 24 24">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                    </svg>
                    <span>Бухгалтерия</span>
                </div>
                <div class="nav-item" onclick="navigateTo('legal')">
                    <svg class="icon nav-icon" viewBox="0 0 24 24">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                    </svg>
                <span>Legal Risk Control</span>
            </div>
        </nav>

            <nav class="nav-section">
                <div class="nav-title">Дополнительно</div>
                <div class="nav-item" onclick="navigateTo('budget')">
                    <svg class="icon nav-icon" viewBox="0 0 24 24">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                    </svg>
                    <span>Бюджеты</span>
                </div>
                <div class="nav-item" onclick="navigateTo('forecast')">
                    <svg class="icon nav-icon" viewBox="0 0 24 24">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                    </svg>
                    <span>Прогнозы</span>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Content will be injected here -->
        </main>
    </div>

    <!-- Create Task Modal -->
    <div class="modal" id="taskModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Создать задачу</h2>
                <button class="modal-close" onclick="closeModal('taskModal')">
                    <svg class="icon" viewBox="0 0 24 24">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Название</label>
                    <input type="text" class="form-input" placeholder="Введите название задачи">
                </div>
                <div class="form-group">
                    <label class="form-label">Описание</label>
                    <textarea class="form-textarea" placeholder="Опишите задачу"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Приоритет</label>
                    <select class="form-select">
                        <option>Критичный</option>
                        <option>Высокий</option>
                        <option>Средний</option>
                        <option>Низкий</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Исполнитель</label>
                    <select class="form-select">
                        <option>Иванов И.И.</option>
                        <option>Петров П.П.</option>
                        <option>Сидоров С.С.</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('taskModal')">Отмена</button>
                <button class="btn btn-primary" onclick="createTask()">Создать</button>
            </div>
        </div>
    </div>

    <script>
        // Navigation
        function navigateTo(module) {
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.nav-item').classList.add('active');

            // Get content
            let content = '';
            switch(module) {
                case 'dashboard':
                    content = getDashboardContent();
                    break;
                case 'finance':
                    content = getFinanceContent();
                    break;
                case 'accounting':
                    content = getAccountingContent();
                    break;
                case 'legal':
                    content = getLegalContent();
                    break;
                case 'budget':
                    content = getBudgetContent();
                    break;
                case 'forecast':
                    content = getForecastContent();
                    break;
                default:
                    content = getDashboardContent();
            }

            // Inject content
            const mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = content;
        }

        // Dashboard Content
        function getDashboardContent() {
            return `
                <div class="module-container">
                    <div class="module-header">
                        <h1 class="module-title">Главный дашборд</h1>
                        <p class="module-subtitle">Сводная информация по всем модулям</p>
                    </div>

                    <div class="kpi-grid">
                        <div class="kpi-card" onclick="navigateTo('finance')">
                            <div class="kpi-header">
                                <span class="kpi-label">Просроченная ДЗ</span>
                                <div class="kpi-icon critical">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="8" x2="12" y2="12"></line>
                                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-value">₽342M</div>
                            <div class="kpi-trend up">
                                <span>+12% за месяц</span>
                            </div>
                        </div>

                        <div class="kpi-card" onclick="navigateTo('accounting')">
                            <div class="kpi-header">
                                <span class="kpi-label">Расхождения</span>
                                <div class="kpi-icon warning">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                                        <line x1="12" y1="9" x2="12" y2="13"></line>
                                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-value">₽127M</div>
                            <div class="kpi-trend down">
                                <span>-3% за месяц</span>
                            </div>
                        </div>

                        <div class="kpi-card" onclick="navigateTo('legal')">
                            <div class="kpi-header">
                                <span class="kpi-label">Активные договоры</span>
                                <div class="kpi-icon success">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <polyline points="20 6 9 17 4 12"></polyline>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-value">1,428</div>
                            <div class="kpi-trend up">
                                <span>+5% за месяц</span>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-header">
                                <span class="kpi-label">Risk Score</span>
                                <div class="kpi-icon critical">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <line x1="12" y1="2" x2="12" y2="6"></line>
                                        <line x1="12" y1="18" x2="12" y2="22"></line>
                                        <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                        <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-value">78/100</div>
                            <div class="kpi-trend up">
                                <span>+4 балла</span>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <div>
                                <h3 class="chart-title">Динамика рисков по модулям</h3>
                                <p class="chart-subtitle">За последние 6 месяцев</p>
                            </div>
                        </div>
                        <div class="chart-legend">
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--red);"></div>
                                <span>Финансы</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--yellow);"></div>
                                <span>Бухгалтерия</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--blue);"></div>
                                <span>Юриспруденция</span>
                            </div>
                        </div>
                        <div class="chart-placeholder">
                            <div class="chart-bar" style="height: 60%">
                                <div class="chart-bar-label">Авг</div>
                            </div>
                            <div class="chart-bar" style="height: 65%">
                                <div class="chart-bar-label">Сен</div>
                            </div>
                            <div class="chart-bar" style="height: 70%">
                                <div class="chart-bar-label">Окт</div>
                            </div>
                            <div class="chart-bar" style="height: 75%">
                                <div class="chart-bar-label">Ноя</div>
                            </div>
                            <div class="chart-bar" style="height: 82%">
                                <div class="chart-bar-label">Дек</div>
                            </div>
                            <div class="chart-bar" style="height: 90%">
                                <div class="chart-bar-label">Янв</div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-critical">
                        <svg class="icon alert-icon" viewBox="0 0 24 24" style="color: var(--red);">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="12"></line>
                            <line x1="12" y1="16" x2="12.01" y2="16"></line>
                        </svg>
                        <div class="alert-content">
                            <div class="alert-title">Отсутствует первичка по операциям на ₽45M</div>
                            <div class="alert-text">Необходимо запросить документы у контрагента</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Finance Content
        function getFinanceContent() {
            return `
                <div class="module-container">
                    <div class="module-header">
                        <h1 class="module-title">Финансы</h1>
                        <p class="module-subtitle">Управление дебиторской задолженностью</p>
                    </div>

                    <div class="tabs">
                        <button class="tab active" onclick="switchTab(event, 'ar')">Реестр ДЗ</button>
                        <button class="tab" onclick="switchTab(event, 'documents')">Контроль первички</button>
                        <button class="tab" onclick="switchTab(event, 'calendar')">Платежный календарь</button>
                        <button class="tab" onclick="switchTab(event, 'acts')">Акты сверки</button>
                        <button class="tab" onclick="switchTab(event, 'policies')">Политики и правила</button>
                    </div>

                    <div id="ar" class="tab-content active">
                        <div class="filters">
                            <select class="filter-select">
                                <option>Все юрлица</option>
                                <option>ООО "Компания А"</option>
                            </select>
                            <select class="filter-select">
                                <option>Все статусы</option>
                                <option>Критично</option>
                                <option>Высокий риск</option>
                            </select>
                        </div>

                        <div class="table-container">
                            <div class="table-header">
                                <h3 class="table-title">Реестр дебиторской задолженности</h3>
                                <button class="btn btn-primary" onclick="openModal('taskModal')">Создать задачу</button>
                            </div>
                            <div class="table-wrapper">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Контрагент</th>
                                            <th>Общая сумма ДЗ</th>
                                            <th>ПДЗ</th>
                                            <th>Дней просрочки</th>
                                            <th>Статус</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="critical-row">
                                            <td>ООО "Торговый Дом"</td>
                                            <td>₽125,000,000</td>
                                            <td>₽45,200,000</td>
                                            <td>92 дня</td>
                                            <td><span class="status-badge status-critical">Критично</span></td>
                                        </tr>
                                        <tr class="high-row">
                                            <td>ЗАО "Промстрой"</td>
                                            <td>₽78,500,000</td>
                                            <td>₽28,300,000</td>
                                            <td>65 дней</td>
                                            <td><span class="status-badge status-high">Высокий</span></td>
                                        </tr>
                                        <tr>
                                            <td>ООО "МегаТорг"</td>
                                            <td>₽42,800,000</td>
                                            <td>₽12,100,000</td>
                                            <td>38 дней</td>
                                            <td><span class="status-badge status-medium">Средний</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="documents" class="tab-content">
                        <div class="alert alert-critical">
                            <svg class="icon alert-icon" viewBox="0 0 24 24" style="color: var(--red);">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            <div class="alert-content">
                                <div class="alert-title">Отсутствует первичка по операциям на ₽45M</div>
                                <div class="alert-text">12 документов требуют внимания</div>
                            </div>
                        </div>

                        <div class="table-container">
                            <div class="table-header">
                                <h3 class="table-title">Контроль первичной документации</h3>
                            </div>
                            <div class="table-wrapper">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Контрагент</th>
                                            <th>Тип документа</th>
                                            <th>Сумма</th>
                                            <th>Статус</th>
                                            <th>Влияние на учет</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="critical-row">
                                            <td>ООО "Торговый Дом"</td>
                                            <td>Акт выполненных работ</td>
                                            <td>₽15,200,000</td>
                                            <td><span class="status-badge status-critical">Не получен</span></td>
                                            <td>Да</td>
                                        </tr>
                                        <tr class="high-row">
                                            <td>ЗАО "Промстрой"</td>
                                            <td>Счет-фактура</td>
                                            <td>₽8,500,000</td>
                                            <td><span class="status-badge status-high">Не подписан</span></td>
                                            <td>Да</td>
                                        </tr>
                                        <tr>
                                            <td>ООО "МегаТорг"</td>
                                            <td>Товарная накладная</td>
                                            <td>₽3,200,000</td>
                                            <td><span class="status-badge status-active">Подписан</span></td>
                                            <td>Нет</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="calendar" class="tab-content">
                        <div class="table-container">
                            <div class="table-header">
                                <h3 class="table-title">Платежный календарь</h3>
                            </div>
                            <div class="table-wrapper">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Дата</th>
                                            <th>Контрагент</th>
                                            <th>Сумма</th>
                                            <th>Приоритет</th>
                                            <th>Риск</th>
                                            <th>Действия</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="critical-row">
                                            <td>05.02.2026</td>
                                            <td>ООО "Поставщик 1"</td>
                                            <td>₽25,000,000</td>
                                            <td><span class="priority-high">Высокий</span></td>
                                            <td>
                                                <div class="traffic-light traffic-red"></div>
                                            </td>
                                            <td>
                                                <button class="btn btn-secondary btn-small">Отложить</button>
                                            </td>
                                        </tr>
                                        <tr class="high-row">
                                            <td>07.02.2026</td>
                                            <td>ЗАО "Подрядчик"</td>
                                            <td>₽12,500,000</td>
                                            <td><span class="priority-medium">Средний</span></td>
                                            <td>
                                                <div class="traffic-light traffic-yellow"></div>
                                            </td>
                                            <td>
                                                <button class="btn btn-secondary btn-small">Отложить</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>10.02.2026</td>
                                            <td>ООО "Аренда Офис"</td>
                                            <td>₽850,000</td>
                                            <td><span class="priority-low">Низкий</span></td>
                                            <td>
                                                <div class="traffic-light traffic-green"></div>
                                            </td>
                                            <td>
                                                <button class="btn btn-secondary btn-small">Отложить</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="alert alert-warning">
                            <svg class="icon alert-icon" viewBox="0 0 24 24" style="color: var(--yellow);">
                                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                                <line x1="12" y1="9" x2="12" y2="13"></line>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                            <div class="alert-content">
                                <div class="alert-title">При задержке платежа ₽25M риск увеличится</div>
                                <div class="alert-text">Рекомендуется выполнить оплату в срок</div>
                            </div>
                        </div>
                    </div>

                    <div id="acts" class="tab-content">
                        <div class="table-container">
                            <div class="table-header">
                                <h3 class="table-title">Акты сверки</h3>
                            </div>
                            <div class="table-wrapper">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Контрагент</th>
                                            <th>Период</th>
                                            <th>Статус</th>
                                            <th>Расхождения</th>
                                            <th>Влияние</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="critical-row">
                                            <td>ООО "Торговый Дом"</td>
                                            <td>Q4 2025</td>
                                            <td><span class="status-badge status-critical">Не подписан</span></td>
                                            <td>Да</td>
                                            <td>
                                                <svg class="icon" viewBox="0 0 24 24" style="color: var(--red);">
                                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                                </svg>
                                                Оплата заблокирована
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ЗАО "Промстрой"</td>
                                            <td>Q4 2025</td>
                                            <td><span class="status-badge status-active">Подписан</span></td>
                                            <td>Нет</td>
                                            <td>-</td>
                                        </tr>
                                        <tr class="high-row">
                                            <td>ООО "МегаТорг"</td>
                                            <td>Q4 2025</td>
                                            <td><span class="status-badge status-pending">На согласовании</span></td>
                                            <td>Да</td>
                                            <td>Требуется уточнение</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="policies" class="tab-content">
                        <div class="alert alert-critical">
                            <svg class="icon alert-icon" viewBox="0 0 24 24" style="color: var(--red);">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            <div class="alert-content">
                                <div class="alert-title">Нарушено положение по ПДЗ</div>
                                <div class="alert-text">Рекомендуется блокировка оплаты для 3 контрагентов</div>
                            </div>
                        </div>

                        <div class="table-container">
                            <div class="table-header">
                                <h3 class="table-title">Политики и правила</h3>
                            </div>
                            <div class="table-wrapper">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Правило</th>
                                            <th>Описание</th>
                                            <th>Значение</th>
                                            <th>Статус</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="critical-row">
                                            <td>Максимальная просрочка</td>
                                            <td>Допустимый срок просрочки ДЗ</td>
                                            <td>60 дней</td>
                                            <td><span class="status-badge status-critical">Нарушено</span></td>
                                        </tr>
                                        <tr>
                                            <td>Обязательность актов сверки</td>
                                            <td>Требование подписания актов</td>
                                            <td>Ежеквартально</td>
                                            <td><span class="status-badge status-active">Соблюдено</span></td>
                                        </tr>
                                        <tr class="high-row">
                                            <td>Лимиты по контрагентам</td>
                                            <td>Максимальная сумма ДЗ</td>
                                            <td>₽100M</td>
                                            <td><span class="status-badge status-high">Превышен</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Accounting Content
        function getAccountingContent() {
            return `
                <div class="module-container">
                    <div class="module-header">
                        <h1 class="module-title">Бухгалтерия</h1>
                        <p class="module-subtitle">Контроль сверок и расхождений</p>
                    </div>

                    <div class="tabs">
                        <button class="tab active" onclick="switchTab(event, 'reconciliations')">Сверки</button>
                        <button class="tab" onclick="switchTab(event, 'discrepancies')">Расхождения</button>
                    </div>

                    <div id="reconciliations" class="tab-content active">
                        <div class="filters">
                            <select class="filter-select">
                                <option>Все источники</option>
                                <option>УПП</option>
                                <option>1С Бухгалтерия</option>
                                <option>ЭДО (Диадок)</option>
                            </select>
                        </div>

                        <div class="alert alert-critical">
                            <svg class="icon alert-icon" viewBox="0 0 24 24" style="color: var(--red);">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            <div class="alert-content">
                                <div class="alert-title">Расхождение ЭДО ↔ Бухгалтерия на сумму ₽8.5M</div>
                                <div class="alert-text">Требуется проверка данных</div>
                            </div>
                        </div>

                        <div class="table-container">
                            <div class="table-header">
                                <h3 class="table-title">Реестр сверок</h3>
                            </div>
                            <div class="table-wrapper">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Контрагент</th>
                                            <th>Источники</th>
                                            <th>Период</th>
                                            <th>Сумма расхождения</th>
                                            <th>Статус</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="critical-row">
                                            <td>ООО "Торговый Дом"</td>
                                            <td>
                                                <span class="source-badge source-upp">УПП</span>
                                                <span class="source-badge source-edo">ЭДО</span>
                                            </td>
                                            <td>Январь 2026</td>
                                            <td>₽8,500,000</td>
                                            <td><span class="status-badge status-critical">Критично</span></td>
                                        </tr>
                                        <tr class="high-row">
                                            <td>ЗАО "Промстрой"</td>
                                            <td>
                                                <span class="source-badge source-upp">УПП</span>
                                                <span class="source-badge source-buh">1С</span>
                                            </td>
                                            <td>Январь 2026</td>
                                            <td>₽4,200,000</td>
                                            <td><span class="status-badge status-high">Высокий</span></td>
                                        </tr>
                                        <tr>
                                            <td>ООО "МегаТорг"</td>
                                            <td>
                                                <span class="source-badge source-buh">1С</span>
                                                <span class="source-badge source-edo">ЭДО</span>
                                            </td>
                                            <td>Январь 2026</td>
                                            <td>₽0</td>
                                            <td><span class="status-badge status-active">Сверено</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="discrepancies" class="tab-content">
                        <div class="table-container">
                            <div class="table-header">
                                <h3 class="table-title">Задачник по расхождениям</h3>
                                <button class="btn btn-primary" onclick="openModal('taskModal')">Создать задачу</button>
                            </div>
                            <div class="table-wrapper">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Контрагент</th>
                                            <th>Источники</th>
                                            <th>Сумма</th>
                                            <th>Ответственный</th>
                                            <th>Срок</th>
                                            <th>Статус</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="critical-row" onclick="alert('Детали расхождения с рекомендациями')">
                                            <td>ООО "Торговый Дом"</td>
                                            <td>
                                                <span class="source-badge source-upp">УПП</span>
                                                <span class="source-badge source-edo">ЭДО</span>
                                            </td>
                                            <td>₽8,500,000</td>
                                            <td>Иванов И.И.</td>
                                            <td>05.02.2026</td>
                                            <td><span class="status-badge status-critical">Критично</span></td>
                                        </tr>
                                        <tr class="high-row" onclick="alert('Детали расхождения с рекомендациями')">
                                            <td>ЗАО "Промстрой"</td>
                                            <td>
                                                <span class="source-badge source-upp">УПП</span>
                                                <span class="source-badge source-buh">1С</span>
                                            </td>
                                            <td>₽4,200,000</td>
                                            <td>Петров П.П.</td>
                                            <td>07.02.2026</td>
                                            <td><span class="status-badge status-pending">В работе</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

    // Legal Content
    function getLegalContent() {
        return `
        <div class="module-container">
            <div class="module-header">
                <h1 class="module-title">Legal Risk Control</h1>
                <p class="module-subtitle">Юридические причины финансовых потерь</p>
            </div>
            
            <div style="background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 32px; border-left: 4px solid var(--red);">
                <p style="font-size: 15px; line-height: 1.6; color: var(--text-secondary);">
                    Модуль показывает <strong style="color: var(--text-primary);">не просто статус договоров</strong>, 
                    а <strong style="color: var(--red);">юридические причины неоплат и финансовых потерь</strong>. 
                    Каждый риск связан с конкретными суммами ПДЗ и контрагентами.
                </p>
            </div>
            
            <div class="kpi-grid" style="margin-bottom: 32px;">
                <div class="kpi-card" onclick="showRiskMap()">
                    <div class="kpi-header">
                        <div class="kpi-label">Юридические риски</div>
                        <div class="kpi-icon critical">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                                <line x1="12" y1="9" x2="12" y2="13"></line>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                        </div>
                    </div>
                    <div class="kpi-value">12</div>
                    <div class="kpi-trend up">
                        <span>Нажмите для расшифровки</span>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <div class="kpi-label">Финансовое влияние</div>
                        <div class="kpi-icon warning">
                            <svg class="icon" viewBox="0 0 24 24">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="kpi-value">₽245M</div>
                    <div class="kpi-trend" style="color: var(--text-muted);">
                        <span>Связано с ПДЗ</span>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-header">
                        <div class="kpi-label">Средняя просрочка</div>
                        <div class="kpi-icon info">
                            <svg class="icon" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                        </div>
                    </div>
                    <div class="kpi-value">54 дн</div>
                    <div class="kpi-trend up">
                        <span>+12 дней к прошлому месяцу</span>
                    </div>
                </div>
            </div>
            
            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Реестр договоров с рисками</h3>
                    <button class="btn btn-primary">Добавить договор</button>
                </div>
                <div class="table-wrapper">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Номер</th>
                                <th>Контрагент</th>
                                <th>Тип</th>
                                <th>Юридический риск</th>
                                <th>Финансовое влияние</th>
                                <th>ПДЗ</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="critical-row" onclick="showRiskCard('high', 'ДГ-2024/578', 'ООО Торговый Дом')">
                                <td>ДГ-2024/578</td>
                                <td>ООО "Торговый Дом"</td>
                                <td>Поставка</td>
                                <td><span class="status-badge status-critical">Высокий</span></td>
                                <td>₽125,000,000</td>
                                <td style="color: var(--red); font-weight: 600;">₽45,200,000</td>
                                <td><button class="btn btn-small btn-secondary">Детали</button></td>
                            </tr>
                            <tr class="high-row" onclick="showRiskCard('medium', 'ДГ-2024/579', 'ЗАО Промстрой')">
                                <td>ДГ-2024/579</td>
                                <td>ЗАО "Промстрой"</td>
                                <td>Подряд</td>
                                <td><span class="status-badge status-high">Средний</span></td>
                                <td>₽78,500,000</td>
                                <td style="color: var(--yellow); font-weight: 600;">₽18,400,000</td>
                                <td><button class="btn btn-small btn-secondary">Детали</button></td>
                            </tr>
                            <tr onclick="showRiskCard('low', 'ДГ-2025/001', 'ООО МегаТорг')">
                                <td>ДГ-2025/001</td>
                                <td>ООО "МегаТорг"</td>
                                <td>Поставка</td>
                                <td><span class="status-badge status-low">Низкий</span></td>
                                <td>₽42,800,000</td>
                                <td style="color: var(--green); font-weight: 600;">₽2,100,000</td>
                                <td><button class="btn btn-small btn-secondary">Детали</button></td>
                            </tr>
                            <tr class="critical-row" onclick="showRiskCard('high', 'ДГ-2024/512', 'ООО Сибирский Альянс')">
                                <td>ДГ-2024/512</td>
                                <td>ООО "Сибирский Альянс"</td>
                                <td>Поставка</td>
                                <td><span class="status-badge status-critical">Высокий</span></td>
                                <td>₽98,700,000</td>
                                <td style="color: var(--red); font-weight: 600;">₽34,000,000</td>
                                <td><button class="btn btn-small btn-secondary">Детали</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        `;
    }
    
    // Show Risk Map Modal
    function showRiskMap() {
        const modal = document.createElement('div');
        modal.className = 'modal active';
        modal.innerHTML = `
            <div class="modal-content" style="max-width: 800px;">
                <div class="modal-header">
                    <h2 class="modal-title">Карта юридических рисков</h2>
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                </div>
                <div class="modal-body">
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">
                        Полный список юридических рисков с расшифровкой причин и финансовым влиянием
                    </p>
                    
                    <div class="table-container" style="margin: 0;">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Уровень</th>
                                    <th>Причина риска</th>
                                    <th>Договор</th>
                                    <th>Контрагент</th>
                                    <th>Сумма</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="critical-row">
                                    <td><span class="status-badge status-critical">Высокий</span></td>
                                    <td>Условия оплаты не фиксируют срок</td>
                                    <td>ДГ-2024/578</td>
                                    <td>ООО "Торговый Дом"</td>
                                    <td>₽45.2M</td>
                                </tr>
                                <tr class="critical-row">
                                    <td><span class="status-badge status-critical">Высокий</span></td>
                                    <td>Односторонний отказ без компенсации</td>
                                    <td>ДГ-2024/512</td>
                                    <td>ООО "Сибирский Альянс"</td>
                                    <td>₽34.0M</td>
                                </tr>
                                <tr class="high-row">
                                    <td><span class="status-badge status-high">Средний</span></td>
                                    <td>Контрагент может приостановить оплату при споре</td>
                                    <td>ДГ-2024/579</td>
                                    <td>ЗАО "Промстрой"</td>
                                    <td>₽18.4M</td>
                                </tr>
                                <tr class="high-row">
                                    <td><span class="status-badge status-high">Средний</span></td>
                                    <td>Отсутствие штрафов за просрочку оплаты</td>
                                    <td>ДГ-2024/445</td>
                                    <td>ООО "ПромТорг"</td>
                                    <td>₽28.5M</td>
                                </tr>
                                <tr class="high-row">
                                    <td><span class="status-badge status-high">Средний</span></td>
                                    <td>Размытые условия приемки товара</td>
                                    <td>ДГ-2024/356</td>
                                    <td>АО "ТехноСтрой"</td>
                                    <td>₽22.1M</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge status-medium">Низкий</span></td>
                                    <td>Длительный срок согласования актов</td>
                                    <td>ДГ-2025/001</td>
                                    <td>ООО "МегаТорг"</td>
                                    <td>₽12.8M</td>
                                </tr>
                                <tr>
                                    <td><span class="status-badge status-medium">Низкий</span></td>
                                    <td>Нет автоматической пролонгации</td>
                                    <td>ДГ-2024/789</td>
                                    <td>ООО "СнабСервис"</td>
                                    <td>₽8.2M</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 24px; padding: 16px; background: var(--bg-dark); border-radius: 8px; border-left: 3px solid var(--red);">
                        <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">Итого:</div>
                        <div style="color: var(--text-secondary);">
                            Выявлено <strong style="color: var(--red);">12 юридических рисков</strong> 
                            на общую сумму <strong style="color: var(--red);">₽245M</strong>, 
                            из которых в просрочке <strong style="color: var(--red);">₽79.2M</strong>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }
    
    // Show Risk Card Modal
    function showRiskCard(level, contractNumber, counterparty) {
        const riskData = {
            high: {
                levelText: 'Высокий',
                levelClass: 'status-critical',
                reason: 'Условия оплаты не фиксируют срок',
                description: 'В договоре указано "оплата в течение разумного срока", что позволяет контрагенту неограниченно откладывать платежи без юридических последствий.',
                pdz: contractNumber === 'ДГ-2024/578' ? '₽45,200,000' : '₽34,000,000',
                overdueDays: contractNumber === 'ДГ-2024/578' ? '62' : '47',
                recommendations: [
                    'Рассмотреть пересмотр условий оплаты с фиксацией конкретных сроков',
                    'Инициировать претензионную работу',
                    'Ограничить отсрочку платежа для новых поставок'
                ]
            },
            medium: {
                levelText: 'Средний',
                levelClass: 'status-high',
                reason: 'Контрагент имеет право приостановить оплату при любом споре',
                description: 'Договор предусматривает право контрагента приостановить все платежи при возникновении любого спора, даже не связанного с конкретной поставкой.',
                pdz: '₽18,400,000',
                overdueDays: '35',
                recommendations: [
                    'Инициировать переговоры об ограничении права приостановки платежей',
                    'Рассмотреть досудебное урегулирование текущих споров',
                    'Усилить контроль качества поставок'
                ]
            },
            low: {
                levelText: 'Низкий',
                levelClass: 'status-low',
                reason: 'Длительный срок согласования актов (30 дней)',
                description: 'Договором предусмотрен длительный срок согласования актов выполненных работ, что замедляет оплату, но не создает критических рисков.',
                pdz: '₽2,100,000',
                overdueDays: '12',
                recommendations: [
                    'Оптимизировать процесс подготовки и согласования актов',
                    'Рассмотреть возможность сокращения срока согласования в дополнительном соглашении'
                ]
            }
        };
        
        const data = riskData[level];
        
        const modal = document.createElement('div');
        modal.className = 'modal active';
        modal.innerHTML = `
            <div class="modal-content" style="max-width: 700px;">
                <div class="modal-header">
                    <h2 class="modal-title">Карточка юридического риска</h2>
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                </div>
                <div class="modal-body">
                    <div style="display: grid; gap: 24px;">
                        <div class="info-block">
                            <div class="info-block-title">Общая информация</div>
                            <div class="info-row">
                                <div class="info-label">Договор</div>
                                <div class="info-value">${contractNumber}</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Контрагент</div>
                                <div class="info-value">${counterparty}</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Уровень риска</div>
                                <div class="info-value"><span class="status-badge ${data.levelClass}">${data.levelText}</span></div>
                            </div>
                        </div>
                        
                        <div style="padding: 16px; background: var(--bg-dark); border-radius: 8px; border-left: 3px solid var(--red);">
                            <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">Причина риска:</div>
                            <div style="color: var(--text-secondary); margin-bottom: 12px; font-size: 15px;">${data.reason}</div>
                            <div style="color: var(--text-muted); font-size: 14px; line-height: 1.5;">${data.description}</div>
                        </div>
                        
                        <div class="info-block">
                            <div class="info-block-title">Финансовое влияние</div>
                            <div class="info-row">
                                <div class="info-label">Связано с ПДЗ</div>
                                <div class="info-value" style="color: var(--red); font-weight: 700; font-size: 18px;">${data.pdz}</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Средняя просрочка</div>
                                <div class="info-value" style="color: var(--yellow);">${data.overdueDays} дней</div>
                            </div>
                        </div>
                        
                        <div style="padding: 16px; background: var(--surface); border-radius: 8px; border: 1px solid var(--border);">
                            <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                                <svg class="icon" viewBox="0 0 24 24" style="color: var(--blue);">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                </svg>
                                Рекомендовано:
                            </div>
                            <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary); line-height: 1.8;">
                                ${data.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 12px; margin-top: 24px;">
                        <button class="btn btn-primary" onclick="showToast('Задача создана')">Создать задачу</button>
                        <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">Закрыть</button>
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }

        // Budget Content
        function getBudgetContent() {
            return `
                <div class="module-container">
                    <div class="module-header">
                        <h1 class="module-title">Бюджеты подразделений</h1>
                        <p class="module-subtitle">Контроль расходов и перерасходов</p>
                    </div>

                    <div class="alert alert-critical">
                        <svg class="icon alert-icon" viewBox="0 0 24 24" style="color: var(--red);">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="12"></line>
                            <line x1="12" y1="16" x2="12.01" y2="16"></line>
                        </svg>
                        <div class="alert-content">
                            <div class="alert-title">Перерасход бюджета в отделе продаж</div>
                            <div class="alert-text">Превышение на ₽2.5M (15%)</div>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h3 class="table-title">Бюджеты по подразделениям</h3>
                        </div>
                        <div class="table-wrapper">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Подразделение</th>
                                        <th>Бюджет</th>
                                        <th>Факт</th>
                                        <th>Отклонение</th>
                                        <th>Процент</th>
                                        <th>Статус</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="critical-row">
                                        <td>Отдел продаж</td>
                                        <td>₽15,000,000</td>
                                        <td>₽17,500,000</td>
                                        <td style="color: var(--red); font-weight: 600;">+₽2,500,000</td>
                                        <td>
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 117%; background: var(--red);"></div>
                                            </div>
                                            117%
                                        </td>
                                        <td><span class="status-badge status-critical">Перерасход</span></td>
                                    </tr>
                                    <tr>
                                        <td>Производство</td>
                                        <td>₽50,000,000</td>
                                        <td>₽48,200,000</td>
                                        <td style="color: var(--green); font-weight: 600;">-₽1,800,000</td>
                                        <td>
                                            <div class="progress-bar">
                                                <div class="progress-fill success" style="width: 96%;"></div>
                                            </div>
                                            96%
                                        </td>
                                        <td><span class="status-badge status-active">В норме</span></td>
                                    </tr>
                                    <tr class="high-row">
                                        <td>Логистика</td>
                                        <td>₽8,000,000</td>
                                        <td>₽7,950,000</td>
                                        <td style="color: var(--yellow); font-weight: 600;">-₽50,000</td>
                                        <td>
                                            <div class="progress-bar">
                                                <div class="progress-fill warning" style="width: 99%;"></div>
                                            </div>
                                            99%
                                        </td>
                                        <td><span class="status-badge status-high">Близко к лимиту</span></td>
                                    </tr>
                                    <tr>
                                        <td>Администрация</td>
                                        <td>₽5,000,000</td>
                                        <td>₽4,100,000</td>
                                        <td style="color: var(--green); font-weight: 600;">-₽900,000</td>
                                        <td>
                                            <div class="progress-bar">
                                                <div class="progress-fill success" style="width: 82%;"></div>
                                            </div>
                                            82%
                                        </td>
                                        <td><span class="status-badge status-active">В норме</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="info-block">
                        <div class="info-block-title">Сводка по бюджетам</div>
                        <div class="info-row">
                            <div class="info-label">Общий бюджет</div>
                            <div class="info-value">₽78,000,000</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Факт расходов</div>
                            <div class="info-value">₽77,750,000</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Отклонение</div>
                            <div class="info-value" style="color: var(--green);">-₽250,000</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Процент исполнения</div>
                            <div class="info-value">99.7%</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Forecast Content
        function getForecastContent() {
            return `
                <div class="module-container">
                    <div class="module-header">
                        <h1 class="module-title">Управленческие прогнозы</h1>
                        <p class="module-subtitle">Прогноз ПДЗ и кассовых разрывов</p>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <div>
                                <h3 class="chart-title">Прогноз просроченной ДЗ</h3>
                                <p class="chart-subtitle">При текущих условиях</p>
                            </div>
                        </div>
                        <div class="chart-legend">
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--red);"></div>
                                <span>Факт ПДЗ</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--yellow); border: 2px dashed var(--yellow);"></div>
                                <span>Прогноз ПДЗ</span>
                            </div>
                        </div>
                        <div class="chart-placeholder">
                            <div class="chart-bar" style="height: 60%">
                                <div class="chart-bar-label">Дек</div>
                            </div>
                            <div class="chart-bar" style="height: 70%">
                                <div class="chart-bar-label">Янв</div>
                            </div>
                            <div class="chart-bar" style="height: 80%; background: repeating-linear-gradient(45deg, var(--yellow), var(--yellow) 10px, transparent 10px, transparent 20px);">
                                <div class="chart-bar-label">Фев</div>
                            </div>
                            <div class="chart-bar" style="height: 90%; background: repeating-linear-gradient(45deg, var(--yellow), var(--yellow) 10px, transparent 10px, transparent 20px);">
                                <div class="chart-bar-label">Мар</div>
                            </div>
                            <div class="chart-bar" style="height: 95%; background: repeating-linear-gradient(45deg, var(--yellow), var(--yellow) 10px, transparent 10px, transparent 20px);">
                                <div class="chart-bar-label">Апр</div>
                            </div>
                        </div>
                        <div class="forecast-line">
                            <div class="forecast-label">Прогноз при текущих условиях</div>
                        </div>
                    </div>

                    <div class="alert alert-warning">
                        <svg class="icon alert-icon" viewBox="0 0 24 24" style="color: var(--yellow);">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        <div class="alert-content">
                            <div class="alert-title">Прогноз кассового разрыва в апреле</div>
                            <div class="alert-text">Ожидается дефицит средств на сумму ₽15M</div>
                        </div>
                    </div>

                    <div class="info-block">
                        <div class="info-block-title">Ключевые прогнозы</div>
                        <div class="info-row">
                            <div class="info-label">Прогноз ПДЗ на март</div>
                            <div class="info-value" style="color: var(--yellow);">₽387M</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Прогноз кассового разрыва</div>
                            <div class="info-value" style="color: var(--red);">₽15M в апреле</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Вероятность роста ПДЗ</div>
                            <div class="info-value">78%</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Tab Switching
        function switchTab(event, tabId) {
            // Remove active from all tabs and content
            const parentContainer = event.target.closest('.module-container');
            parentContainer.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            parentContainer.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Add active to clicked tab and corresponding content
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // Modal Functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function createTask() {
            alert('Задача создана успешно!');
            closeModal('taskModal');
        }

        // Sidebar Toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('expanded');
        }

        // Notifications Toggle
        function toggleNotifications() {
            const dropdown = document.getElementById('notificationsDropdown');
            dropdown.classList.toggle('active');
        }

        // Click outside to close notifications
        document.addEventListener('click', function(event) {
            const notificationsBtn = event.target.closest('.header-btn');
            const notificationsDropdown = document.getElementById('notificationsDropdown');
            
            if (!notificationsBtn && !event.target.closest('.notifications-dropdown')) {
                notificationsDropdown.classList.remove('active');
            }
        });

        // Initialize with dashboard
        document.addEventListener('DOMContentLoaded', function() {
            navigateTo('dashboard');
        });
    </script>
</body>
</html>
